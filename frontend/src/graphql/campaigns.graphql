query GetCampaigns {
  campaigns(order_by: { created_at: desc }) {
    id
    name
    setting
    themes
    status
    created_at
    npcs_aggregate {
      aggregate {
        count
      }
    }
    locations_aggregate {
      aggregate {
        count
      }
    }
    quest_hooks_aggregate {
      aggregate {
        count
      }
    }
  }
}

query GetCampaign($id: Int!) {
  campaigns_by_pk(id: $id) {
    id
    name
    setting
    themes
    player_characters
    status
    metadata
    created_at
    updated_at
    npcs(order_by: { created_at: asc }) {
      id
      name
      role
      description
      personality
      stats
      secret_info
    }
    locations(order_by: { created_at: asc }) {
      id
      name
      type
      description
      connections
      properties
      location_npcs {
        id
        relationship_type
        npc {
          id
          name
          role
        }
      }
    }
    quest_hooks(order_by: { created_at: asc }) {
      id
      title
      description
      difficulty
      reward
      related_npc_ids
      related_location_ids
      status
    }
    encounters(order_by: { created_at: asc }) {
      id
      title
      description
      difficulty
      creatures
      environmental_factors
      location {
        id
        name
      }
    }
  }
}

mutation CreateCampaign($input: campaigns_insert_input!) {
  insert_campaigns_one(object: $input) {
    id
    name
    status
  }
}

mutation UpdateCampaignStatus($id: Int!, $status: String!) {
  update_campaigns_by_pk(pk_columns: { id: $id }, _set: { status: $status }) {
    id
    status
  }
}

subscription CampaignProgress($id: Int!) {
  campaigns_by_pk(id: $id) {
    id
    status
    metadata
    updated_at
  }
}